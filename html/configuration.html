<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
		<title>Package Trackr Configuration</title>
		<link href='//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css' rel='stylesheet'>
	</head>

	<body>
		<div class='container' style='margin-top:20px;'>

			<div class='well'>
				<div class='form-group'>
					<label for='api_key'>Boxoh API Key</label>
					<input type='text' class='form-control' id='api_key' maxlength='30' />
				</div>

				<div class='form-group'>
					<label for='item_name'>Item Name</label>
					<input type='text' class='form-control' id='item_name' maxlength='30' />
				</div>

				<div class='form-group'>
					<label for='tracking_number'>Tracking Number: <small>(UPS, FedEx, USPS, or DHL)</small></label>
					<input type='text' class='form-control' id='tracking_number' maxlength='30' />
				</div>
			</div>

			<button type='submit' class='btn btn-primary btn-block btn-lg' id='save'>Save</button>

		</div> <!-- /container -->

		<script src='//code.jquery.com/jquery-1.10.2.min.js'></script>
		<script src='//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js'></script>
		<script>
			function getQueryVariable(variable) {
				var query = location.search.substring(1);
				var vars = query.split('&');
				for (var i=0;i<vars.length;i++) {
					var pair = vars[i].split('=');
					if (pair[0] == variable)
						return decodeURIComponent(pair[1]);
				}
				return '';
			}
			$().ready(function() {
				$('#api_key').val(getQueryVariable('api_key'));
				$('#item_name').val(getQueryVariable('item_name'));
				$('#tracking_number').val(getQueryVariable('tracking_number'));
				$('#save').click(function() {
					var ret = {api_key: $('#api_key').val(), item_name: $('#item_name').val(), tracking_number: $('#tracking_number').val()};
					document.location = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(ret));
				});
			});
		</script>
	</body>
</html>
